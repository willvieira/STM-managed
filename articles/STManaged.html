<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to STManaged • STManaged</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to STManaged">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-90532848-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-90532848-4');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">STManaged</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/STManaged.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/willvieira/STM-managed">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to STManaged</h1>
            
            <h4 class="date">2019-08-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/willvieira/STM-managed/blob/master/vignettes/STManaged.Rmd"><code>vignettes/STManaged.Rmd</code></a></small>
      <div class="hidden name"><code>STManaged.Rmd</code></div>

    </div>

    
    
<p>The goal of the <code>STManaged</code> package is to wrap the State and transition model for the eastern North American forest extended with forest management practices. I will describe here step by step all the functionality of the package from the initialization of the model to plotting outputs.</p>
<p>There will be four steps:</p>
<ol style="list-style-type: decimal">
<li>initiate the landscape</li>
<li>run the model</li>
<li>plot the output dynamic</li>
<li>animate the output dynamic</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(STManaged)</a></code></pre></div>
<div id="initiate-the-landscape" class="section level2">
<h2 class="hasAnchor">
<a href="#initiate-the-landscape" class="anchor"></a>Initiate the landscape</h2>
<p>To initiate the landscape let’s first define the environmental gradient in which we are going to run the model. A latitudinal gradient will be created using the temperature variation from colder temperature (north) to warmer temperature (south). Annual mean temperature must be between <code>-5.3</code> and <code>12.2</code> <span class="math inline">\(^\circ\)</span>C to respect the parameterization boundary.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">temp_gradient &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="op">-</span><span class="fl">2.5</span>, <span class="fl">0.35</span>)</a></code></pre></div>
<p>The second argument is the size of cells of the landscape, in Km<span class="math inline">\(^2\)</span>. We recommend not to exceed the limits of <code>0.3</code> to <code>4</code> km<span class="math inline">\(^2\)</span>. Cells smaller than <code>0.3</code> km<span class="math inline">\(^2\)</span> will be time and memory consuming, and cells larger than <code>4</code> km<span class="math inline">\(^2\)</span> may overestimate dispersion (<em>there’s a sensitivity analysis for cell size <a href="https://github.com/willvieira/STManaged/issues/1">here</a></em>).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">initLand &lt;-<span class="st"> </span><span class="kw"><a href="../reference/create_landscape.html">create_landscape</a></span>(<span class="dt">climRange =</span> temp_gradient, <span class="dt">cellSize =</span> <span class="fl">0.8</span>)</a></code></pre></div>
<p><code>initLand</code> is a list of 6 objects with information about the landscape. <code>land</code> informing which forest states is present in each cell, <code>env1</code> storing the (scaled) temperature gradient and <code>nCol</code> and <code>nRow</code> to inform the landscape dimension. The other two objects have information about cells neighbor to be used internally.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(initLand[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>])</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; List of 4</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt;  $ land: Named int [1:100000] 1 1 1 1 1 1 1 1 1 1 ...</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;   ..- attr(*, "names")= chr [1:100000] "1" "2" "3" "4" ...</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;  $ env1: num [1:1000] -2.46 -2.46 -2.46 -2.45 -2.45 ...</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;  $ nCol: num 1000</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;  $ nRow: num 100</span></a></code></pre></div>
<p>Let’s take a look in the <code>initLand</code> using the function <code><a href="../reference/plot_landscape.html">plot_landscape()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/plot_landscape.html">plot_landscape</a></span>(initLand, <span class="dt">Title =</span> <span class="st">'initial_landscape'</span>)</a></code></pre></div>
<p><img src="STManaged_files/figure-html/unnamed-chunk-5-1.png" width="960" style="display: block; margin: auto;"></p>
</div>
<div id="run-the-model" class="section level2">
<h2 class="hasAnchor">
<a href="#run-the-model" class="anchor"></a>Run the model</h2>
<p>With the initial landscape set, we can now run the model using the function <code><a href="../reference/run_model.html">run_model()</a></code>. This function has many arguments and I will discuss the important ones here. First we need to define the number of steps we want the model to run. Note that one time step in the model means 5 years of forest dynamics. So let’s set the model to run for 500 years:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># 500 years</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">steps =<span class="st"> </span><span class="dv">100</span></a></code></pre></div>
<p>Now we have to set the forest management practices. We implemented four management practices that aim to favor temperate forest, and therefore increase forest range limits shift northward. (i) Plantation of temperate forest in empty plots present in the boreal region; (ii) harvest of boreal plots; (iii) selective thinning of boreal species present in mixed plots and (iv) enrichment planting of temperate species in boreal plots. The intensity of each management practice varies from <code>0</code> to <code>1</code>. Here we define an intensity of <code>0.15</code> for plantation, which means that 15% of empty plots (regeneration state) will become temperate plots:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># order: plantation, harvest, thinning and enrichment</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">managInt &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.15</span>, <span class="fl">0.0</span>, <span class="fl">0.0</span>, <span class="fl">0.0</span>)</a></code></pre></div>
<p>The next argument is <code>RCP</code>. We define the warming temperature scenario for <code>4.5</code> which means an increase of 1.8<span class="math inline">\(^\circ\)</span>C for the next 100 years:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">RCP =<span class="st"> </span><span class="fl">4.5</span></a></code></pre></div>
<p>By default, the model is stochastic (<code>stoch = TRUE</code>) and it will run in only one core (no parallel: <code>cores = 1</code>):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">lands &lt;-<span class="st"> </span><span class="kw"><a href="../reference/run_model.html">run_model</a></span>(<span class="dt">steps =</span> steps,</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">                   <span class="dt">initLand =</span> initLand,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">                   <span class="dt">managInt =</span> managInt,</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">                   <span class="dt">RCP =</span> RCP)</a></code></pre></div>
<p>The model output <code>lands</code> is a list of all individual <code>land</code> steps and other useful information such as (i) scaled temperature gradient, (ii) steps, (iii) management intensity, (iv) RCP scenario and (v) landscape dimensions.</p>
</div>
<div id="plot-output" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-output" class="anchor"></a>Plot output</h2>
<div id="forest-state-occupancy" class="section level3">
<h3 class="hasAnchor">
<a href="#forest-state-occupancy" class="anchor"></a>Forest state occupancy</h3>
<p>First we can plot the occupancy of the forest states over the temperature gradient for one specific time step using the function <code><a href="../reference/plot_occupancy.html">plot_occupancy()</a></code>. With this function we can see how the state occupancy changed over two or more steps, and an idea of the range limits shift. This function takes the output <code>lands</code>, the step we want to plot (note if we plot more than one step, we need to set <code>mfrow</code> accordingly) and a smoothing value (<code>spar</code>) from <code>0</code> (no smooth) to <code>1</code>. So let’s plot the first and last time step:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/par">par</a></span>(<span class="dt">mfrow =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">1</span>), <span class="dt">cex =</span> <span class="fl">0.9</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="../reference/plot_occupancy.html">plot_occupancy</a></span>(lands, <span class="dt">step =</span> <span class="dv">0</span>, <span class="dt">spar =</span> <span class="fl">0.4</span>)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw"><a href="../reference/plot_occupancy.html">plot_occupancy</a></span>(lands, <span class="dt">step =</span> <span class="dv">150</span>, <span class="dt">spar =</span> <span class="fl">0.4</span>)</a></code></pre></div>
<p><img src="STManaged_files/figure-html/unnamed-chunk-11-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
<div id="range-limit-shift" class="section level3">
<h3 class="hasAnchor">
<a href="#range-limit-shift" class="anchor"></a>Range Limit shift</h3>
<p>Another possibility is to evaluate how the range limit of forest states changes over time. For that we will use the <code><a href="../reference/range_limit.html">range_limit()</a></code> function that is integrated in the <code><a href="../reference/plot_rangeShift.html">plot_rangeShift()</a></code> function. The latter needs only the <code>lands</code> object and a threshold <code>rangeLimitOccup</code> defining the minimum occupancy a row of the landscape that must be occupied by the state to be considered part of the state distribution. This argument calculates the boreal trailing edge and temperate leading edge. The red dotted line shows the moment when the temperature increase due to climate change ends.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="../reference/plot_rangeShift.html">plot_rangeShift</a></span>(lands, <span class="dt">rangeLimitOccup =</span> <span class="fl">0.7</span>)</a></code></pre></div>
<p><img src="STManaged_files/figure-html/unnamed-chunk-12-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="animation" class="section level2">
<h2 class="hasAnchor">
<a href="#animation" class="anchor"></a>Animation</h2>
<p>Finally we can animate the spatiotemporal dynamic of the model using the <code><a href="../reference/animate.html">animate()</a></code> function. This function needs the output <code>lands</code>, the increment value <code>stepsBy</code>, the frames per second <code>fps</code> and also the <code>rangeLimitOccup</code> argument in case we want to print a line with the both boreal and temperate range limits.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="../reference/animate.html">animate</a></span>(lands, <span class="dt">stepsBy =</span> <span class="dv">2</span>, <span class="dt">fps =</span> <span class="dv">5</span>, <span class="dt">gifName =</span> <span class="st">'plant0.15_RCP4.5'</span>, <span class="dt">rangeLimitOccup =</span> <span class="fl">0.7</span>)</a></code></pre></div>
<p><img src="img/plant0.15_RCP4.5.gif"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#initiate-the-landscape">Initiate the landscape</a></li>
      <li><a href="#run-the-model">Run the model</a></li>
      <li><a href="#plot-output">Plot output</a></li>
      <li><a href="#animation">Animation</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://willvieira.github.io">Willian Vieira</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
